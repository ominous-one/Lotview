<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Olympic Auto Group | Digital Flagship</title>
    
    <!-- TECH STACK -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>

    <!-- CONFIGURATION -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            dark: '#022d60', 
                            light: '#00aad2',
                            surface: '#F8FAFC'
                        }
                    },
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    boxShadow: { 'glass': '0 8px 32px 0 rgba(31, 38, 135, 0.15)' }
                }
            }
        }
    </script>

    <style>
        body { background-color: #F8FAFC; }
        .glass-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.6);
        }
        .hide-scroll::-webkit-scrollbar { display: none; }
        
        /* Chatbot Animation */
        .chat-slide-in { animation: slideInRight 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        @keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        /* Custom Checkbox */
        .custom-checkbox { appearance: none; background-color: #fff; margin: 0; font: inherit; color: currentColor; width: 1.15em; height: 1.15em; border: 1px solid #cbd5e1; border-radius: 0.15em; display: grid; place-content: center; }
        .custom-checkbox::before { content: ""; width: 0.65em; height: 0.65em; transform: scale(0); transition: 120ms transform ease-in-out; box-shadow: inset 1em 1em #022d60; transform-origin: center; clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%); }
        .custom-checkbox:checked::before { transform: scale(1); }
    </style>
</head>
<body class="overflow-x-hidden text-slate-800">

    <!-- NAVIGATION -->
    <nav class="fixed top-0 w-full z-50 p-2 md:p-4">
        <div class="max-w-7xl mx-auto glass-panel rounded-2xl px-6 py-4 flex justify-between items-center shadow-sm">
            <div class="flex items-center gap-3 cursor-pointer" onclick="app.view = 'grid'; renderApp();">
                <div class="w-10 h-10 bg-brand-dark rounded-lg flex items-center justify-center text-white font-bold text-xl">O</div>
                <div><h1 class="font-bold text-brand-dark leading-none">OLYMPIC<br><span class="text-[10px] tracking-widest opacity-70">AUTO GROUP</span></h1></div>
            </div>
            <div class="flex gap-4">
                <button class="bg-brand-light/10 text-brand-light px-4 py-2 rounded-lg text-sm font-bold hover:bg-brand-light/20 transition">
                    <i class="fa-solid fa-phone mr-2"></i> Sales
                </button>
            </div>
        </div>
    </nav>

    <!-- MAIN APP CONTAINER -->
    <div id="app" class="pt-28 pb-20 px-4 min-h-screen">
        <!-- Content Injected via JS -->
    </div>

    <!-- STICKY CHATBOT (Hidden by default) -->
    <div id="chatbot-container" class="fixed bottom-24 right-4 md:right-8 z-40 hidden w-80">
        <div class="glass-panel rounded-2xl shadow-2xl overflow-hidden border border-blue-100 chat-slide-in">
            <div class="bg-brand-dark p-4 flex items-center gap-3">
                <div class="relative">
                    <img src="https://randomuser.me/api/portraits/men/32.jpg" class="w-10 h-10 rounded-full border-2 border-white">
                    <div class="absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-brand-dark"></div>
                </div>
                <div>
                    <p class="text-white font-bold text-sm">General Manager</p>
                    <p class="text-blue-200 text-xs">Active Now</p>
                </div>
                <button onclick="closeChat()" class="ml-auto text-white/50 hover:text-white"><i class="fa-solid fa-times"></i></button>
            </div>
            <div class="p-4 bg-slate-50">
                <div class="bg-white p-3 rounded-xl rounded-tl-none shadow-sm text-sm text-slate-600 leading-relaxed" id="chat-message">
                    <!-- Message Injected JS -->
                </div>
                <button class="mt-3 w-full bg-brand-light text-white py-2 rounded-lg text-sm font-bold hover:bg-blue-600 transition">
                    Yes, show me
                </button>
            </div>
        </div>
    </div>

    <!-- JAVASCRIPT ENGINE -->
    <script>
        // --- 1. DATA SIMULATION ---
        const inventory = [
            { id: 1, year: 2024, make: "Hyundai", model: "Tucson", trim: "Preferred AWD", type: "SUV", price: 34999, odometer: 12500, image: "https://images.unsplash.com/photo-1609521263047-f8f205293f24?q=80&w=800", badges: ["One Owner"], views: 42 },
            { id: 2, year: 2023, make: "Genesis", model: "GV70", trim: "3.5T Sport", type: "SUV", price: 58500, odometer: 24100, image: "https://images.unsplash.com/photo-1619767886558-efdc259cde1a?q=80&w=800", badges: ["Manager Special"], views: 89 },
            { id: 3, year: 2024, make: "Ford", model: "F-150", trim: "Lariat", type: "Truck", price: 68900, odometer: 5000, image: "https://images.unsplash.com/photo-1589640031222-48c675f961db?q=80&w=800", badges: ["Clean CarFax"], views: 112 },
            { id: 4, year: 2021, make: "Hyundai", model: "Elantra", trim: "N Line", type: "Sedan", price: 26900, odometer: 45000, image: "https://images.unsplash.com/photo-1605559424843-9e4c2287d38d?q=80&w=800", badges: ["Gas Saver"], views: 34 },
            { id: 5, year: 2025, make: "Hyundai", model: "Santa Fe", trim: "Calligraphy", type: "SUV", price: 52000, odometer: 100, image: "https://images.unsplash.com/photo-1592853625601-bb9d23da126e?q=80&w=800", badges: ["New Arrival"], views: 156 },
        ];

        // --- 2. STATE MANAGEMENT ---
        const app = {
            view: 'grid', // 'grid' or 'vdp'
            activeCar: null,
            filters: {
                type: 'all',
                priceMax: 100000
            },
            chatTimer: null
        };

        // --- 3. RENDER LOGIC ---
        function renderApp() {
            const container = document.getElementById('app');
            
            if (app.view === 'grid') {
                // CLEAR CHAT
                closeChat();
                
                // GRID VIEW
                const filtered = inventory.filter(c => 
                    (app.filters.type === 'all' || c.type === app.filters.type) &&
                    c.price <= app.filters.priceMax
                );

                container.innerHTML = `
                    <div class="max-w-7xl mx-auto flex flex-col lg:flex-row gap-8">
                        <!-- FILTERS SIDEBAR -->
                        <aside class="w-full lg:w-64 flex-shrink-0 space-y-6">
                            <div class="glass-panel p-6 rounded-2xl sticky top-24">
                                <h3 class="font-bold text-slate-900 mb-4 flex items-center gap-2"><i class="fa-solid fa-sliders"></i> Filters</h3>
                                
                                <!-- Type -->
                                <div class="mb-6">
                                    <p class="text-xs font-bold text-slate-400 uppercase mb-3">Body Style</p>
                                    <div class="space-y-2">
                                        ${['all', 'SUV', 'Truck', 'Sedan'].map(t => `
                                            <label class="flex items-center gap-3 cursor-pointer group">
                                                <input type="radio" name="type" class="custom-checkbox" ${app.filters.type === t ? 'checked' : ''} onclick="setFilter('type', '${t}')">
                                                <span class="text-sm font-medium text-slate-600 group-hover:text-brand-dark capitalize">${t}</span>
                                            </label>
                                        `).join('')}
                                    </div>
                                </div>

                                <!-- Price Slider -->
                                <div>
                                    <div class="flex justify-between text-xs font-bold text-slate-400 uppercase mb-2">
                                        <span>Max Price</span>
                                        <span class="text-brand-dark">$${app.filters.priceMax.toLocaleString()}</span>
                                    </div>
                                    <input type="range" min="10000" max="100000" step="5000" value="${app.filters.priceMax}" class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-brand-light" oninput="setFilter('priceMax', this.value)">
                                </div>
                            </div>
                        </aside>

                        <!-- GRID CONTENT -->
                        <main class="flex-1">
                            <div class="mb-6 flex justify-between items-end">
                                <h2 class="text-2xl font-bold text-slate-900">Inventory <span class="text-slate-400 font-normal text-lg ml-2">${filtered.length} Vehicles</span></h2>
                                <div class="text-xs font-bold text-green-600 bg-green-100 px-3 py-1 rounded-full animate-pulse">
                                    <i class="fa-solid fa-circle text-[8px] mr-1"></i> Live Updates
                                </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                                ${filtered.map(car => renderCard(car)).join('')}
                            </div>
                        </main>
                    </div>
                `;
            } else if (app.view === 'vdp') {
                // VDP VIEW (Dynamic Page)
                renderVDP(container, app.activeCar);
                startChatTimer(app.activeCar);
                trackView(app.activeCar); // Remarketing Trigger
            }
        }

        function renderCard(car) {
            // Simulate payment calc (Rate 6.99%, 84mo)
            const payment = Math.floor((car.price * 1.05) / 84 * 1.07); // Rough calc
            
            return `
            <div class="group bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 border border-slate-100 cursor-pointer" onclick="openVDP(${car.id})">
                <div class="relative aspect-[4/3] overflow-hidden">
                    <img src="${car.image}" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-80"></div>
                    
                    <div class="absolute top-3 left-3 flex gap-1">
                        ${car.badges.map(b => `<span class="bg-white/90 backdrop-blur text-[10px] font-bold px-2 py-1 rounded text-brand-dark shadow-sm">${b}</span>`).join('')}
                    </div>

                    <div class="absolute bottom-0 w-full p-4 text-white flex justify-between items-end">
                        <div>
                            <p class="text-2xl font-black">$${payment}<span class="text-xs font-normal opacity-70">/mo</span></p>
                            <p class="text-xs font-bold text-brand-light">Est. Finance</p>
                        </div>
                         <div class="text-right">
                            <p class="text-lg font-bold">$${car.price.toLocaleString()}</p>
                            <p class="text-[10px] opacity-70">Cash Price</p>
                        </div>
                    </div>
                </div>
                <div class="p-4">
                    <div class="flex justify-between items-start mb-3">
                        <div>
                            <h3 class="font-bold text-slate-900">${car.year} ${car.make} ${car.model}</h3>
                            <p class="text-xs text-slate-500">${car.trim} • ${car.odometer.toLocaleString()} km</p>
                        </div>
                        <div class="text-xs font-semibold text-red-500 bg-red-50 px-2 py-1 rounded flex items-center gap-1">
                            <i class="fa-solid fa-fire"></i> ${car.views} views
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mt-4">
                        <button class="col-span-2 bg-brand-dark text-white py-2.5 rounded-lg text-xs font-bold hover:bg-brand-light transition-colors uppercase tracking-wide">
                            Check Availability
                        </button>
                    </div>
                </div>
            </div>
            `;
        }

        function renderVDP(container, car) {
            const payment = Math.floor((car.price * 1.05) / 84 * 1.07);

            container.innerHTML = `
                <div class="max-w-6xl mx-auto animate-fade-in">
                    <!-- BREADCRUMBS -->
                    <button onclick="app.view='grid'; renderApp();" class="mb-6 text-sm font-bold text-slate-500 hover:text-brand-dark flex items-center gap-2">
                        <i class="fa-solid fa-arrow-left"></i> Back to Inventory
                    </button>

                    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                        
                        <!-- LEFT: MEDIA -->
                        <div class="lg:col-span-8 space-y-6">
                            <div class="aspect-video bg-black rounded-2xl overflow-hidden shadow-lg relative group">
                                <img src="${car.image}" class="w-full h-full object-cover">
                                <div class="absolute bottom-4 right-4 flex gap-2">
                                    <button class="bg-white/90 backdrop-blur px-4 py-2 rounded-lg text-sm font-bold hover:bg-white"><i class="fa-solid fa-rotate-360"></i> 360° View</button>
                                    <button class="bg-white/90 backdrop-blur px-4 py-2 rounded-lg text-sm font-bold hover:bg-white"><i class="fa-solid fa-images"></i> Gallery</button>
                                </div>
                            </div>
                            
                            <!-- Specs Grid -->
                            <div class="glass-panel p-6 rounded-2xl">
                                <h3 class="font-bold text-lg mb-4">Vehicle Details</h3>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 text-sm">
                                    <div><p class="text-slate-400 text-xs uppercase">Odometer</p><p class="font-bold">${car.odometer.toLocaleString()} km</p></div>
                                    <div><p class="text-slate-400 text-xs uppercase">Transmission</p><p class="font-bold">Automatic</p></div>
                                    <div><p class="text-slate-400 text-xs uppercase">Drivetrain</p><p class="font-bold">AWD</p></div>
                                    <div><p class="text-slate-400 text-xs uppercase">Stock #</p><p class="font-bold">STK-${car.id}99</p></div>
                                </div>
                            </div>
                        </div>

                        <!-- RIGHT: COMMERCE -->
                        <div class="lg:col-span-4 space-y-4">
                            <div class="glass-panel p-6 rounded-2xl border-t-4 border-brand-light sticky top-24">
                                <h1 class="text-3xl font-black text-slate-900 mb-1">${car.year} ${car.make} ${car.model}</h1>
                                <p class="text-slate-500 font-medium mb-6">${car.trim}</p>
                                
                                <div class="bg-slate-50 p-4 rounded-xl mb-6 border border-slate-100">
                                    <div class="flex justify-between items-end mb-2">
                                        <span class="text-sm font-bold text-slate-500">Finance Price</span>
                                        <span class="text-3xl font-black text-brand-dark">$${payment}<span class="text-base font-normal text-slate-400">/mo</span></span>
                                    </div>
                                    <div class="flex justify-between items-end">
                                        <span class="text-xs font-medium text-slate-400">Cash Price</span>
                                        <span class="text-lg font-bold text-slate-600">$${car.price.toLocaleString()}</span>
                                    </div>
                                </div>

                                <div class="space-y-3">
                                    <button class="w-full bg-brand-dark text-white py-4 rounded-xl font-bold shadow-lg hover:bg-[#001e45] transition-all flex items-center justify-center gap-3 text-lg">
                                        <i class="fa-solid fa-lock"></i> Reserve Now
                                    </button>
                                    <button class="w-full bg-white border-2 border-slate-200 text-slate-700 py-3 rounded-xl font-bold hover:bg-slate-50 transition-all">
                                        <i class="fa-solid fa-calendar-check mr-2"></i> Book Test Drive
                                    </button>
                                    <button class="w-full bg-brand-light/10 text-brand-light border border-brand-light/20 py-3 rounded-xl font-bold hover:bg-brand-light/20 transition-all">
                                        Get Approved
                                    </button>
                                </div>

                                <div class="mt-6 pt-6 border-t border-slate-200">
                                    <div class="flex items-center gap-2 text-sm text-slate-500">
                                        <i class="fa-solid fa-eye text-brand-light"></i>
                                        <span><strong>${car.views} people</strong> viewed in last 24h</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            `;
        }

        // --- 4. ACTIONS ---
        function setFilter(key, value) {
            app.filters[key] = value;
            renderApp();
        }

        function openVDP(id) {
            app.activeCar = inventory.find(c => c.id === id);
            app.view = 'vdp';
            renderApp();
            window.scrollTo(0,0);
        }

        function trackView(car) {
            // REMARKETING PIXEL MOCKUP
            console.log(`[PIXEL] Tracking ViewContent for VIN: ${car.id} | Price: ${car.price}`);
            // In prod: fbq('track', 'ViewContent', { content_name: car.model, value: car.price });
        }

        // --- 5. THE SNIPER CHATBOT ---
        function startChatTimer(car) {
            if (app.chatTimer) clearTimeout(app.chatTimer);
            
            app.chatTimer = setTimeout(() => {
                const chat = document.getElementById('chatbot-container');
                const msg = document.getElementById('chat-message');
                
                msg.innerHTML = `Hi there! I see you're checking out the <strong>${car.year} ${car.model}</strong>.<br><br>We actually just had a price adjustment on this specific unit. Would you like to see the new numbers?`;
                
                chat.classList.remove('hidden');
                
                // Audio Notification Sound (Optional)
                // new Audio('ping.mp3').play(); 
            }, 10000); // 10 seconds
        }

        function closeChat() {
            document.getElementById('chatbot-container').classList.add('hidden');
        }

        // INIT
        renderApp();

    </script>
</body>
</html>